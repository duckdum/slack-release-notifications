name: Release Notification on PR Opened

on:
  pull_request:
    types: [opened, synchronize, closed]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install dependencies
        run: npm install

      - name: Build the project
        run: npm run build

      - name: Send Slack notification
        uses: ./
        with:
          slack-bot-token: ${{ secrets.SLACK_BOT_TOKEN }}
          slack-channel: 'C0761AV0960'
          github-token: ${{ secrets.GITHUB_TOKEN }}
          github-to-slack-map: |
            {
              "mduchev": "U04K5DCNF18",
              "krzysztof-kolakowski": "U03HMV3T2GH",
              "opchaves": "U051MKEPJ8Y",
              "ommiles": "U02CR4R48JX",
              "duckdum": "UTRMW2371",
              "rminhoto": "U05CT8P804T",
              "pecabum": "U0461TZ2A2V",
              "pmwthunkable": "U051MKEPJ8Y",
              "JanhaviDahihande": "UJVRSE8D7",
              "kkrogmerio": "U05N45DHX5L",
              "TingC": "U6EMD2ZG9",
              "andresmechali": "U05QQEPP849",
              "Comum": "U04LY9803C1",
              "weihuali0509": "U1BCM5ZU4"
            }
